# CLD - LAB06 : Infrastructure-as-code and configuration management - Terraform, Ansible and Gitlab
**Group S : A. David, T. Van Hove**

**Date : 01.06.2023**

**Teacher : Prof. Marcel Graf**

**Assistant : RÃ©mi Poulard**

In this lab, we are going to deploy a website running in the cloud and using Terraform and Ansible, tools that use the principle of infrastructure as code. We'll be using NGINX and Google Cloud technologies.

In the first part of this lab, we're going to provision the cloud infrastructure. In other words, we'll create the necessary resources on the cloud.

In the second part, we'll configure the virtual machine by installing a web server and configuration files. To do this, we'll use Ansible.

In the third part, which is optional, we'll use Terraform as a team. The solution will be to store the state of Terraform in a version control system.

### Table of content

[toc]

# Task 1: Install Terraform

We installed the Terraform application in a Ubuntu 22.04 system based on WSL and did not encounter any difficulties. The following screenshot shows the version of terraform we used:

![](.\figures\Terraform_installation.png)

# Task 2: Create a cloud infrastructure on Google Compute Engine with Terraform



The project-IDs :

- **labgce-388319** For Anthony account
- **labgce-388413** Four Tim account







# Task 3: Install Ansible





# Task 4: Configure Ansible to connect to the managed VM





# Task 5: Install a web server and configure a web site





# Task 6: Adding a handler for NGINX restart





# Task 7: Test Desired State Configuration principles



